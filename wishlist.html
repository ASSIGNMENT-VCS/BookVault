<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BookVault | A Vanilla JavaScript Book Listing Application</title>
  <!-- Favicon link -->
  <link rel="icon" href="./assets/img/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="./assets/css/reset.css" />
  <link rel="stylesheet" href="./assets/css/style.css" />
</head>

<body>
  <div class="container">
    <div class="wrapper">
      <!-- Header  -->
      <header>
        <h2>
          <a href="index.html">
            <span style="color: #2162AF;">Book</span><span style="color: #662D91;">Vault</span>
          </a>
        </h2>
        <div class="search">
          <input type="text" id="searchQuery" onkeyup="searchQueryData()" ondblclick="searchQueryData()"
            placeholder="Find your next favorite book..." />
          <div id="liveSearch">
            <ul>
              <!-- Search Item Will Be Show Here  -->
            </ul>
          </div>
        </div>
        <div class="icon">
          <a href="wishlist.html">
            <span id="wishlistIconGlobal">♡</span>
            <div class="count" id="wishlistCountGlobal">
              <p>0</p>
            </div>
          </a>
        </div>
      </header>
      <!-- Content  -->
      <div class="content">
        <div id="wishlist">
          <div class="wishlisted_book">
            <div class="wish_book_image">
              <img src="https://www.gutenberg.org/cache/epub/84/pg84.cover.medium.jpg" alt="Book Image" />
            </div>
            <div class="wish_book_content">
              <h1>Book Name Here Book Name Here Book Name Here</h1>
            </div>
            <div class="wish_book_remove">
              <button>Remove</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer -->
      <footer>
        Feel free to drop us a 'hello' at <span>support@bookvault.com</span>
      </footer>
    </div>
  </div>
  <script>
    // Global Wishlist
    let globalWishlist = () => {
      const wishlistIconGlobal = document.getElementById("wishlistIconGlobal");
      const wishlistCountGlobal = document.getElementById("wishlistCountGlobal");
      let currentWishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

      // === Only For Wishlist Page START===
      let wishListsContainer = document.getElementById("wishlist");
      let htmlContent = '';

      if (currentWishlist.length > 0) {
        currentWishlist.forEach(book => {
          htmlContent += `
        <div class="wishlisted_book">
          <div class="wish_book_image">
            <img src="${book.image}" alt="Book Image" />
          </div>
          <div class="wish_book_content">
            <h1>${book.title}</h1>
          </div>
          <div class="wish_book_remove">
            <button onclick="removeFromWishlist(${book.id})">❌</button>
            
          </div>
        </div>`;
        });
        wishListsContainer.innerHTML = htmlContent;
      } else {
        wishListsContainer.innerHTML = `You Do Not Add Any Item In Wishlist. Check Books From <a href="/">Here</a>`;
      }
      // === Only For Wishlist Page END===

      wishlistIconGlobal.style.color = currentWishlist.length ? 'red' : 'inherit';
      wishlistCountGlobal.innerHTML = currentWishlist.length > 0 ? currentWishlist.length : '0';
    }

    globalWishlist();

    function removeFromWishlist(bookId) {
      let currentWishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
      const updatedWishlist = currentWishlist.filter(book => book.id !== bookId);
      localStorage.setItem('wishlist', JSON.stringify(updatedWishlist));
      globalWishlist();
    }

  </script>
  <script src="./assets/js/common.js"></script>
</body>

</html>